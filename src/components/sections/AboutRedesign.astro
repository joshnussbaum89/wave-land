---
import { Picture } from 'astro:assets'
import Icon from 'astro-icon'
import SectionHeader from '../text/SectionHeader.astro'
import SiteCta from '../SiteCta.astro'
import Link from '../text/Link.astro'
import headshot from '../../assets/headshot.png'
---

<section id="about" class="about site-section aos-fade">
  <SectionHeader text="Who is Wave Land?" />

  <div class="about-container">
    <div class="scrim"></div>
    <article id="who-we-are" class="who-we-are card green card-active">
      <div class="card-group">
        <h3>About Me</h3>
        <p>
          Hey, I'm Josh. I've spent my life creating things - for years as a full-time musician and
          songwriter, and now as a web developer. I created Wave Land Web to empower ambitious and
          entrepreneurial dreamers with the resources and knowledge necessary to thrive online and
          create websites that bring their brand and personality to life.
        </p>
        <p class="bold">Click the link below to schedule a free 15-minute consultation</p>
        <SiteCta
          text="Let's Connect"
          url="https://calendly.com/wavelandweb/15-min-meeting"
          openInNewTab={true}
        />
      </div>

      <div class="card-group">
        <Picture
          src={headshot}
          formats={['avif', 'webp']}
          alt="Josh Nussbaum eating a bowl of ramen"
        />
      </div>
    </article>
    <article id="what-we-do" class="what-we-do card purple">
      <div class="card-group">
        <h3>What We Do</h3>
        <p>
          We build websites for creatives and small businesses that focus on usability,
          accessibility, and <Link
            href="/blog/normalizing-web-sustainability"
            text="sustainability"
          />. Our mission is to help you achieve your professional dreams by building custom web
          experiences that support your vision and inspire creativity, all while delivering
          unparalleled user experience.
        </p>
        <SiteCta url="/#portfolio" text="See Projects" />
      </div>

      <div class="card-group">
        <h3>Services</h3>
        <ul class="services">
          <li class="tag">User-focused Web Design</li>
          <li class="tag">Custom Web Development</li>
        </ul>

        <h3>Technologies</h3>
        <ul class="technologies">
          <li>
            <a
              href="https://www.typescriptlang.org/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Typescript"
              title="Typescript"
            >
              <Icon name="typescript" />
            </a>
          </li>
          <li>
            <a
              href="https://astro.build/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Astro"
              title="Astro"
            >
              <Icon name="astro" />
            </a>
          </li>
          <li>
            <a
              href="https://nextjs.org/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Next.js"
              title="Next.js"
            >
              <Icon name="nextjs" />
            </a>
          </li>
          <li>
            <a
              href="https://www.sanity.io/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Sanity"
              title="Sanity"
            >
              <Icon name="sanity" />
            </a>
          </li>
          <li>
            <a
              href="https://www.figma.com/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Figma"
              title="Figma"
            >
              <Icon name="figma" />
            </a>
          </li>
        </ul>
      </div>
    </article>

    <div class="navigation">
      <button class="dot card-active"></button>
      <button class="dot"></button>
    </div>
  </div>
</section>

<style>
  .about {
    max-width: var(--max-width-medium);
  }

  .about-container {
    position: relative;

    & .scrim {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: var(--border-radius-image);
      background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="700" height="700"><defs><linearGradient id="b" x1="50%" x2="50%" y1="0%" y2="100%" gradientTransform="rotate(-34 .5 .5)"><stop offset="0%" stop-color="%23f9f9ff"/><stop offset="100%" stop-color="rgba(255,255,255,0)" stop-opacity="0"/></linearGradient><linearGradient id="a" x1="50%" x2="50%" y1="0%" y2="100%" gradientTransform="rotate(34 .5 .5)"><stop/><stop offset="100%" stop-color="rgba(255,255,255,0)" stop-opacity="0"/></linearGradient><filter id="c" width="140%" height="140%" x="-20%" y="-20%" color-interpolation-filters="sRGB" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse"><feTurbulence width="100%" height="100%" x="0%" y="0%" baseFrequency="1.25" numOctaves="2" result="turbulence" seed="2" stitchTiles="stitch" type="fractalNoise"/><feColorMatrix width="100%" height="100%" x="0%" y="0%" in="turbulence" result="colormatrix" type="saturate" values="0"/><feComponentTransfer width="100%" height="100%" x="0%" y="0%" in="colormatrix" result="componentTransfer"><feFuncR slope="3" type="linear"/><feFuncG slope="3" type="linear"/><feFuncB slope="3" type="linear"/></feComponentTransfer><feColorMatrix width="100%" height="100%" x="0%" y="0%" in="componentTransfer" result="colormatrix2" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 15 -7"/></filter></defs><rect width="100%" height="100%"/><rect width="100%" height="100%" fill="url(%23a)"/><rect width="100%" height="100%" fill="url(%23b)"/><rect width="100%" height="100%" fill="transparent" filter="url(%23c)" style="mix-blend-mode:overlay"/></svg>');
      background-size: cover;
      background-position: center;
      opacity: 0.1;
      pointer-events: none;
      overflow: auto;
    }

    & .card {
      /* TODO: what animation are we doing? */
      display: none;
      align-items: center;
      text-align: center;
      gap: var(--section-spacing-base);
      padding: clamp(2rem, 5vw, 4rem) clamp(2rem, 5vw, 4rem) 6rem;
      border-radius: var(--border-radius-image);
      box-shadow: var(--box-shadow-light);

      @media (min-width: 1024px) {
        & {
          grid-template-columns: minmax(auto, 600px) minmax(auto, 300px);
          justify-content: space-evenly;
        }
      }

      &.card-active {
        display: grid;
      }

      &.purple {
        color: var(--color-foreground);
        background-color: var(--color-primary-200);
      }

      &.green {
        color: var(--color-background);
        background-color: var(--color-secondary-200);
      }

      & .card-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;

        @media (min-width: 1024px) {
          &:nth-of-type(1) {
            align-items: flex-start;
            text-align: left;
          }
        }

        &:nth-of-type(2) {
          max-width: 300px;
          margin: auto;
        }

        & img {
          filter: drop-shadow(var(--box-shadow-light));
        }

        & p:last-of-type {
          margin-bottom: 1rem;
        }

        & .services {
          margin-bottom: 2rem;

          & .tag {
            margin-bottom: 1rem;
            filter: drop-shadow(var(--box-shadow-light));
          }
        }

        & .technologies {
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 1rem;

          & li {
            width: 4rem;
          }
        }
      }
    }

    & .navigation {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      justify-content: center;
      gap: 1rem;
      z-index: 2;

      & .dot {
        width: 20px;
        height: 20px;
        border: none;
        border-radius: 50%;

        background-color: var(--color-foreground);
        border: 2px solid var(--color-background);
        cursor: pointer;

        &.card-active {
          background-color: var(--color-background);
        }
      }
    }
  }
</style>

<script>
  /**
   * TODO: fix this shit
   */
  document.addEventListener('astro:page-load', () => {
    const cards = document.querySelectorAll('.about .card')
    const dots = document.querySelectorAll('.navigation .dot')

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        cards.forEach((card) => card.classList.remove('card-active'))
        dots.forEach((dot) => dot.classList.remove('card-active'))

        cards[index].classList.add('card-active')
        dots[index].classList.add('card-active')
      })
    })
  })
</script>
